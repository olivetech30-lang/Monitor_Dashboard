<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ClimateCloud</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand-icon" aria-hidden="true">
          <!-- simple climate icon -->
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M7 14a5 5 0 0 1 9.7-1.5A3.5 3.5 0 1 1 18 19H8.2A3.2 3.2 0 0 1 7 14Z"
              stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 3v3M5 6l2 2M19 6l-2 2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <div class="brand-name">ClimateCloud</div>
          <div class="brand-sub">Real-time environmental monitoringA</div>
        </div>
      </div>

      <div class="topbar-right">
        <div class="pill" id="statusPill">‚óè Connecting</div>
      </div>
    </header>

    <aside class="sidebar">
      <nav class="nav">
  <button class="nav-item" data-section="dashboard">Dashboard</button>
  <button class="nav-item" data-section="temperature">Temperature</button>
  <button class="nav-item" data-section="humidity">Humidity</button>
  <button class="nav-item" data-section="history">History</button>
  <button class="nav-item" data-section="settings">Settings</button>
      </nav>
      <div class="sidebar-footer">
        <div class="muted">API</div>
        <code class="code">/api/latest</code>
        <code class="code">/api/history</code>
      </div>
    </aside>

    <main class="main">
      <section class="grid">
        <article class="card" id="tempCard">
          <div class="card-head">
            <h2>Temperature</h2>
            <span class="badge">Live</span>
          </div>
          <div class="metric">
            <div class="metric-value" id="tempValue">--</div>
            <div class="metric-unit">¬∞C</div>
          </div>
          <div class="meta">
            <div>Last update: <span id="tempTs">‚Äî</span></div>
          </div>
        </article>

    
<!-- Add this inside <main class="main"> -->
<article class="card span-2" id="flashController">
  <div class="card-head">
    <h2>Flash Controller</h2>
    <span class="badge">Live</span>
  </div>

  <div class="metric">
    <div class="metric-value" id="flashDelay">--</div>
    <div class="metric-unit">ms</div>
  </div>

  <div class="meta">
    <div>Status: <span id="flashStatus">‚Äî</span></div>
  </div>

  <div class="controls">
    <button class="btn" id="fasterBtn">‚àí FASTER</button>
    <button class="btn btn-green" id="slowerBtn">+ SLOWER</button>
  </div>

  <div class="slider-container">
    <input type="range" id="delaySlider" min="50" max="2000" value="500" step="50" />
    <div class="slider-labels">
      <span>50ms (Fast)</span>
      <span>2000ms (Slow)</span>
    </div>
  </div>

  <div class="presets">
    <button class="btn btn-small" data-delay="100">100ms</button>
    <button class="btn btn-small" data-delay="250">250ms</button>
    <button class="btn btn-small" data-delay="500">500ms</button>
    <button class="btn btn-small" data-delay="1000">1000ms</button>
  </div>
</article>








        <article class="card" id="humCard">
          <div class="card-head">
            <h2>Humidity</h2>
            <span class="badge">Live</span>
          </div>
          <div class="metric">
            <div class="metric-value" id="humValue">--</div>
            <div class="metric-unit">%</div>
          </div>
          <div class="meta">
            <div>Last update: <span id="humTs">‚Äî</span></div>
          </div>
        </article>



        <article class="card span-2" id="settingsCard">
          <div class="card-head">
            <h2>Settings</h2>
          </div>

          <div class="settings">
            <label class="field">
              <span>Polling interval (ms)</span>
              <input id="pollMs" type="number" min="500" step="250" value="2000" />
            </label>

            <label class="field">
              <span>History limit</span>
              <input id="historyLimit" type="number" min="10" step="10" value="200" />
            </label>

            <button class="btn" id="applyBtn">Apply</button>
          </div>

          <p class="muted small">
            This dashboard polls <code>/api/latest</code> and refreshes history periodically.
          </p>
        </article>

<!-- HISTORY SECTION (HIDDEN BY DEFAULT) -->
<article class="card full-page" id="historySection" style="display:none;">
  <div class="card-head">
    <h2>Timeseries History</h2>
    <div class="actions">
      <button class="btn" id="refreshHistoryBtn">üîÑ Refresh</button>
      <button class="btn btn-ghost" id="clearUiBtn">Clear UI</button>
    </div>
  </div>

  <div class="table-wrap full-height">
    <table class="table" aria-label="Full history">
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Temperature (¬∞C)</th>
          <th>Humidity (%)</th>
        </tr>
      </thead>
      <tbody id="historyBodyFull">
        <tr>
          <td colspan="3" class="muted">Loading history...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="meta">
    <div>Entries: <span id="historyCountFull">0</span></div>
  </div>
</article>

      </section>
    </main>
  </div>

  <script src="./app.js"></script>
</body>
</html>